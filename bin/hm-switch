#!/usr/bin/env bash

set -euo pipefail

# Home Manager looks in `~/.config/home-manager` by default. Since the main
# `flake.nix` file is at this repo's root, we'll just tell it to use that
# instead of moving the config to `~/.config/home-manager`.
repo_root=$(dirname "$(dirname "$0")")
nproc=$(nproc)
home-manager --flake "$repo_root" switch -j "$nproc" --cores "$nproc"
